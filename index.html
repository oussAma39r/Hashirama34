<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ø¬Ù…Ø¯Ø§Øª â€” CFH & FH</title>
<style>
  :root{
    --bg:#eef6fb;
    --card:#ffffff;
    --accent1:#2f80ed;
    --accent2:#56a0e0;
    --muted:#6b7280;
    --danger:#ef4444;
    --soft-shadow: 0 8px 24px rgba(47,128,237,0.08);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: "Segoe UI", Tahoma, Arial, "Noto Naskh Arabic", sans-serif;
    background: linear-gradient(180deg,var(--bg),#f7fbff 60%);
    color:#0f172a;
    direction: rtl;
    padding-bottom:40px;
  }
  header{
    background: linear-gradient(90deg,var(--accent1),var(--accent2));
    color:white;
    padding:16px;
    text-align:center;
    font-size:20px;
    box-shadow: 0 6px 18px rgba(47,128,237,0.15);
  }
  .container{width:95%;max-width:1200px;margin:18px auto;}
  .menu{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-bottom:16px;}
  .menu button{
    background:var(--card);border:1px solid rgba(15,23,42,0.06);
    padding:10px 14px;border-radius:12px;cursor:pointer;box-shadow:var(--soft-shadow);
    min-width:140px;text-align:center;font-weight:700;
  }
  .menu button.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;box-shadow:0 10px 26px rgba(47,128,237,0.16)}
  section.card{display:none;background:var(--card);border-radius:12px;padding:16px;box-shadow:var(--soft-shadow);margin-bottom:18px}
  h2{margin:6px 0 12px 0;font-size:18px}
  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  label{font-size:13px;color:var(--muted)}
  input[type="text"], input[type="number"], input[type="date"], input[type="time"], select, textarea {
    padding:8px 10px;border-radius:8px;border:1px solid #e6eef8;min-width:120px;
  }
  button.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
  button.danger{background:var(--danger);color:white;border:none;padding:6px 10px;border-radius:6px;cursor:pointer}
  table{width:100%;border-collapse:collapse;margin-top:12px;font-size:14px}
  th, td{padding:8px;border:1px solid #eef6fb;text-align:center}
  th{background:linear-gradient(90deg,#eaf4ff,#f9fdff);color:#0b3a66}
  .small{font-size:13px;color:var(--muted)}
  .note{background:#f0f7ff;padding:8px;border-radius:8px;color:#234;margin-top:8px}
  @media(max-width:820px){ .row{flex-direction:column;align-items:stretch} .menu button{min-width:120px;font-size:14px} }
</style>
</head>
<body>
<header>ğŸ“¦ Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ø¬Ù…Ø¯Ø§Øª â€” CFH & FH</header>

<div class="container">
  <div class="menu" id="mainMenu">
    <button data-target="search" class="active">ğŸ” Ø¨Ø­Ø«</button>
    <button data-target="issues">âš  ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„</button>
    <button data-target="foam">ğŸ§ª ÙˆØ²Ù† Ø§Ù„Ø±ØºÙˆØ©</button>
    <button data-target="dp">ğŸ§© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ§Ù„ÙØ©</button>
    <button data-target="tanks">ğŸ› Ø§Ù„Ø£Ø­ÙˆØ§Ø¶ Ø§Ù„ØªØ§Ù„ÙØ©</button>
    <button data-target="moussage">ğŸ¶ Moussage</button>
    <button data-target="structure">ğŸ”© Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªØ§Ù„Ù</button>
    <button data-target="frames">ğŸ§­ Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠ</button>
  </div>

  <!-- ===== SEARCH ===== -->
  <section id="search" class="card" style="display:block">
    <h2>ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¬Ù…Ø¯Ø§Øª</h2>
    <div class="row">
      <label>Ø£Ø¯Ø®Ù„ EAN6 Ø£Ùˆ Code Ø£Ùˆ Ø§ÙƒØªØ¨ "FH" Ø£Ùˆ "CFH":</label>
      <input type="text" id="searchInput" placeholder="Ù…Ø«Ø§Ù„: 048813 Ø£Ùˆ CFH" />
      <button class="primary" onclick="handleLookup()">Ø¹Ø±Ø¶</button>
      <button onclick="clearSearch()">Ù…Ø³Ø­</button>
    </div>
    <div id="searchOutput" style="margin-top:12px"></div>

    <hr style="margin:12px 0">
    <div class="small note">
      Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© (CFH Ùˆ FH ÙÙ‚Ø·):
      <select id="modelList" style="min-width:260px; margin-right:12px"></select>
      <span id="modelEvap" class="small"></span>
    </div>
  </section>

  <!-- ===== ISSUES ===== -->
  <section id="issues" class="card">
    <h2>âš  ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„</h2>
    <div class="row">
      <div><label>Ù…ÙˆØ¯ÙŠÙ„</label><br><select id="issueModel"></select></div>
      <div><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><br><input type="date" id="issueDate" /></div>
      <div><label>Ø§Ù„ÙˆÙ‚Øª</label><br><input type="time" id="issueTime" /></div>
      <div style="flex:1"><label>Ù…Ù„Ø§Ø­Ø¸Ø©</label><br><input type="text" id="issueNote" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø©"/></div>
      <div style="align-self:flex-end"><button class="primary" onclick="addIssue()">Ø¥Ø¶Ø§ÙØ©</button></div>
    </div>
    <table id="issuesTable"><thead><tr><th>Ù…ÙˆØ¯ÙŠÙ„</th><th>ØªØ§Ø±ÙŠØ®</th><th>ÙˆÙ‚Øª</th><th>Ù…Ù„Ø§Ø­Ø¸Ø©</th><th>Ø­Ø°Ù</th></tr></thead><tbody></tbody></table>
  </section>

  <!-- ===== FOAM ===== -->
  <section id="foam" class="card">
    <h2>ğŸ§ª ÙˆØ²Ù† Ø§Ù„Ø±ØºÙˆØ© (Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ)</h2>
    <div class="note">ØªØ¹Ù„ÙŠÙ…Ø§Øª: Ù„ÙƒÙ„ Ù‚Ø·Ø¹Ø© Ø§Ù„Ù†Ø§ØªØ¬ = (ÙˆØ²Ù† Ø§Ù„Ù‚Ø·Ø¹Ø© Ø¨Ø§Ù„ØºÙ… Ã· Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¶ØºØ· Ø¨Ø§Ù„Ù…Ø§Ø¡ Ø¨Ø§Ù„ØºÙ…) Ã— 1000. Ø¬Ø³Ù… = 5 Ù‚Ø·Ø¹ØŒ Ø¨Ø§Ø¨ = 3 Ù‚Ø·Ø¹. Ø§Ù„Ø­ÙØ¸ ÙƒÙ‚ÙŠÙ…Ø© Ø±Ù‚Ù…ÙŠØ© (Ù†Ø³Ø¨Ø©Ã—1000) Ø«Ù… ÙŠÙ…ÙƒÙ† Ø¹Ø±Ø¶Ù‡Ø§ Ø£Ùˆ ØªØµØ¯ÙŠØ±Ù‡Ø§.</div>
    <div class="row">
      <div><label>Ù…ÙˆØ¯ÙŠÙ„</label><br><select id="foamModel"></select></div>
      <div><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><br><input type="date" id="foamDate" /></div>
      <div><label>Ø§Ù„ÙˆÙ‚Øª</label><br><input type="time" id="foamTime" /></div>
      <div style="align-self:flex-end"><button class="primary" onclick="initFoam()">Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„</button></div>
    </div>

    <div id="foamArea" style="display:none;margin-top:12px">
      <h4>Ø¬Ø³Ù… â€” 5 Ù‚Ø·Ø¹</h4>
      <div id="bodyArea" class="row" style="flex-wrap:wrap;gap:10px"></div>
      <h4 style="margin-top:12px">Ø¨Ø§Ø¨ â€” 3 Ù‚Ø·Ø¹</h4>
      <div id="doorArea" class="row" style="flex-wrap:wrap;gap:10px"></div>
      <div class="row" style="margin-top:12px">
        <div><label>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¬Ø³Ù…</label><br><input id="bodyAvg" readonly /></div>
        <div><label>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¨Ø§Ø¨</label><br><input id="doorAvg" readonly /></div>
        <div style="align-self:flex-end"><button class="primary" onclick="saveFoamRecord()">Ø­ÙØ¸</button></div>
      </div>
    </div>

    <table id="foamTable"><thead><tr><th>Ù…ÙˆØ¯ÙŠÙ„</th><th>ØªØ§Ø±ÙŠØ®</th><th>ÙˆÙ‚Øª</th><th>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¬Ø³Ù…</th><th>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¨Ø§Ø¨</th><th>Ø­Ø°Ù</th></tr></thead><tbody></tbody></table>
  </section>

  <!-- ===== DAMAGED PRODUCTS ===== -->
  <section id="dp" class="card">
    <h2>ğŸ§© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ§Ù„ÙØ© Ù„Ù„Ù…Ø¬Ù…Ø¯Ø©</h2>
    <div class="row">
      <div><label>Ù…ÙˆØ¯ÙŠÙ„</label><br><select id="dpModel"></select></div>
      <div><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><br><input type="date" id="dpDate" /></div>
      <div><label>Ø§Ù„Ø¹Ø¯Ø¯</label><br><input type="number" id="dpCount" min="1" value="1" /></div>
      <div style="flex:1"><label>Ù†ÙˆØ¹ Ø§Ù„ØªÙ„Ù / Ø³Ø¨Ø¨</label><br><input type="text" id="dpType" placeholder="Ù…Ø«Ø§Ù„: ÙƒØ³Ø±ØŒ Ø®Ø¯Ø´"/></div>
      <div style="align-self:flex-end"><button class="primary" onclick="addDP()">Ø¥Ø¶Ø§ÙØ©</button></div>
    </div>
    <table id="dpTable"><thead><tr><th>Ù…ÙˆØ¯ÙŠÙ„</th><th>ØªØ§Ø±ÙŠØ®</th><th>Ø¹Ø¯Ø¯</th><th>Ù†ÙˆØ¹</th><th>Ø­Ø°Ù</th></tr></thead><tbody></tbody></table>
  </section>

  <!-- ===== TANKS (Ã‰VAPORATEUR) ===== -->
  <section id="tanks" class="card">
    <h2>ğŸ› Ø§Ù„Ø£Ø­ÙˆØ§Ø¶ Ø§Ù„ØªØ§Ù„ÙØ© â€” Ã‰vaporateur</h2>
    <div class="note small">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­ÙˆØ¶ Ù…Ù‚ØµÙˆØ±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªØ§Ù„ÙŠØ©. Ø­Ø³Ø§Ø¨ Evaporateur ÙŠØªÙ… ÙÙ‚Ø· Ø¥Ø°Ø§ Ø§Ø®ØªØ±Øª "Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¢Ù„ÙŠ".</div>
    <div class="row" style="margin-top:10px">
      <div>
        <label>Ù†ÙˆØ¹ Ø§Ù„Ø­ÙˆØ¶</label><br>
        <select id="tankType">
          <option value="T13">T13 â€” 0.77 ÙƒØº</option>
          <option value="T19">T19 â€” 0.90 ÙƒØº</option>
          <option value="T280">T280 â€” 0.90 ÙƒØº</option>
          <option value="T260">T260 â€” 0.90 ÙƒØº</option>
          <option value="T380">T380 â€” 1.30 ÙƒØº</option>
          <option value="T390">T390 â€” 1.25 ÙƒØº</option>
          <option value="T450">T450 â€” 1.80 ÙƒØº</option>
        </select>
      </div>
      <div><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><br><input type="date" id="tankDate" /></div>
      <div><label>Ø§Ù„ÙƒÙ…ÙŠØ©</label><br><input type="number" id="tankCount" min="1" value="1" /></div>
      <div>
        <label>Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„Ø©</label><br>
        <select id="tankUsage">
          <option value="matiere">Ù…Ø§Ø¯Ø© Ø£ÙˆÙ„ÙŠØ©</option>
          <option value="manuel">Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙŠØ¯ÙˆÙŠ</option>
          <option value="auto">Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¢Ù„ÙŠ</option>
        </select>
      </div>
      <div><label>capillaire</label><br><input type="number" id="capillaire" min="0" value="0" /></div>
      <div><label>plomb</label><br><input type="number" id="plomb" min="0" value="0" /></div>
      <div><label>black board</label><br><input type="number" id="blackboard" min="0" value="0" /></div>
    </div>

    <div class="row" style="margin-top:8px">
      <div><label>Side panel grand</label><br><input type="number" id="sideGrand" min="0" value="0" /></div>
      <div><label>Side panel petit</label><br><input type="number" id="sidePetit" min="0" value="0" /></div>
      <div><label>Bottom board</label><br><input type="number" id="bottomBoard" min="0" value="0" /></div>
      <div style="align-self:flex-end"><button class="primary" onclick="addTankRecord()">Ø£Ø¶Ù</button></div>
    </div>

    <table id="tanksTable">
      <thead><tr>
        <th>Ø§Ù„Ù†ÙˆØ¹</th><th>ØªØ§Ø±ÙŠØ®</th><th>ÙƒÙ…ÙŠØ©</th><th>Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„Ø©</th><th>capillaire</th><th>plomb</th><th>black board</th>
        <th>side grand</th><th>side petit</th><th>bottom</th><th>Evaporateur (ÙƒØº)</th><th>Ø­Ø°Ù</th>
      </tr></thead><tbody></tbody>
    </table>

    <div style="margin-top:12px" class="row"><div class="small">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Evaporateur Ø§Ù„Ù…Ø­Ø³ÙˆØ¨: <strong id="evapTotal">0.00 ÙƒØº</strong></div></div>
  </section>

  <!-- ===== MOUSSAGE ===== -->
  <section id="moussage" class="card">
    <h2>ğŸ¶ Moussage (Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ§Ù„ÙØ©)</h2>
    <div class="row">
      <div><label>Ù…ÙˆØ¯ÙŠÙ„</label><br><select id="mModel"></select></div>
      <div><label>Ù†ÙˆØ¹ Ø§Ù„ØªÙ„Ù</label><br><select id="mType"><option>Corps mousse</option><option>Porte mousse</option><option>Panneau</option><option>Contre porte</option></select></div>
      <div><label>Ø§Ù„Ø³Ø¨Ø¨</label><br><select id="mReason"><option value="pre_assemblage">pre assemblage</option><option value="defaut_mould">Defaut mould</option><option value="test_mould">Test mould</option><option value="test_densite">Test densite</option><option value="defaut_fournisseur">defout fournisseur</option><option value="other">Other</option></select></div>
      <div><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><br><input type="date" id="mDate" /></div>
      <div><label>Ø§Ù„Ø¹Ø¯Ø¯</label><br><input type="number" id="mCount" min="1" value="1" /></div>
      <div style="align-self:flex-end"><button class="primary" onclick="addMoussage()">Ø¥Ø¶Ø§ÙØ©</button></div>
    </div>
    <table id="mTable"><thead><tr><th>Ù…ÙˆØ¯ÙŠÙ„</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„Ø³Ø¨Ø¨</th><th>ØªØ§Ø±ÙŠØ®</th><th>Ø¹Ø¯Ø¯</th><th>Ø­Ø°Ù</th></tr></thead><tbody></tbody></table>
  </section>

  <!-- ===== STRUCTURE ===== -->
  <section id="structure" class="card">
    <h2>ğŸ”© Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªØ§Ù„Ù (ØµÙØ§Ø¦Ø­)</h2>
    <div class="row">
      <div><label>Ø¬Ù‡Ø© Ø§Ù„ØªÙ„Ù</label><br><select id="sSide"><option>Ø£Ù…Ø§Ù…ÙŠ</option><option>Ø®Ù„ÙÙŠ</option><option>ÙŠÙ…ÙŠÙ†</option><option>ÙŠØ³Ø§Ø±</option></select></div>
      <div><label>Ù…ÙˆØ¯ÙŠÙ„</label><br><select id="sModel"></select></div>
      <div><label>Ø§Ù„Ø³Ø¨Ø¨</label><br><select id="sReason"><option value="matiere">Ù…Ø§Ø¯Ø© Ø£ÙˆÙ„ÙŠØ©</option><option value="cut_problem">Ù…Ø´ÙƒÙ„ ÙÙŠ Ø§Ù„ØªÙ‚Ø·ÙŠØ¹</option><option value="transport">Ù…Ø´ÙƒÙ„ ÙÙŠ Ø§Ù„Ù†Ù‚Ù„</option><option value="measurement">Ù…Ø´ÙƒÙ„ ÙÙŠ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª</option><option value="other">Ø£Ø³Ø¨Ø§Ø¨ Ø£Ø®Ø±Ù‰</option></select></div>
      <div><label>Ø§Ù„Ø¹Ø¯Ø¯</label><br><input type="number" id="sCount" min="1" value="1" /></div>
      <div style="align-self:flex-end"><button class="primary" onclick="addStructure()">Ø¥Ø¶Ø§ÙØ©</button></div>
    </div>
    <table id="sTable"><thead><tr><th>Ø¬Ù‡Ø©</th><th>Ù…ÙˆØ¯ÙŠÙ„</th><th>Ø§Ù„Ø³Ø¨Ø¨</th><th>Ø¹Ø¯Ø¯</th><th>ØªØ§Ø±ÙŠØ®</th><th>Ø­Ø°Ù</th></tr></thead><tbody></tbody></table>
  </section>

  <!-- ===== FRAMES ===== -->
  <section id="frames" class="card">
    <h2>ğŸ§­ Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠ â€” Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª</h2>
    <div class="note small">
      Ù‚ÙŠØ§Ø³Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© (Ø®Ø§Ø±Ø¬ÙŠ â€” Ø¯Ø§Ø®Ù„ÙŠ):
      <ul style="margin:6px 0 0 0; padding-left:18px; text-align:right">
        <li>T13: 565 Ù…Ù… â€” Ø¯Ø§Ø®Ù„ÙŠ 465 Ù…Ù…</li>
        <li>T19: 729 Ù…Ù… â€” Ø¯Ø§Ø®Ù„ÙŠ 605 Ù…Ù…</li>
        <li>T39: 1115 Ù…Ù… â€” Ø¯Ø§Ø®Ù„ÙŠ 960 Ù…Ù…</li>
        <li>T450: 1425 Ù…Ù… â€” Ø¯Ø§Ø®Ù„ÙŠ 1270 Ù…Ù…</li>
      </ul>
    </div>

    <div class="row" style="margin-top:10px">
      <div><label>Ø§Ù„Ù†ÙˆØ¹</label><br>
        <select id="frameType">
          <option value="T13">T13</option>
          <option value="T19">T19</option>
          <option value="T39">T39</option>
          <option value="T450">T450</option>
        </select>
      </div>
      <div><label>Ø§Ù„Ø·ÙˆÙ„ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ (Ù…Ù…)</label><br><input type="number" id="frameOuter" /></div>
      <div><label>Ø§Ù„Ø·ÙˆÙ„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ (Ù…Ù…)</label><br><input type="number" id="frameInner" /></div>
      <div style="align-self:flex-end"><button class="primary" onclick="saveFrame()">Ø­ÙØ¸</button></div>
    </div>

    <table id="frameTable"><thead><tr><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø®Ø§Ø±Ø¬ÙŠ (Ù…Ù…)</th><th>Ø¯Ø§Ø®Ù„ÙŠ (Ù…Ù…)</th><th>Ø­Ø°Ù</th></tr></thead><tbody></tbody></table>
  </section>

</div>

<script>
/* ========== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©: Ù…ÙˆØ¯ÙŠÙ„Ø§Øª CFH & FH ÙÙ‚Ø· ========== */
const MODELS = [
  { ean:'043153', code:'CFH140A' },
  { ean:'039965', code:'CFH-MT26' },
  { ean:'048752', code:'CFH-MT260V4G' },
  { ean:'048813', code:'CFH-MT260V4W' },
  { ean:'044181', code:'CFH-MT26G' },
  { ean:'048516', code:'CFH-T130V2G' },
  { ean:'048271', code:'CFH-T130V2W' },
  { ean:'012357', code:'CFH-T13GM03' },
  { ean:'012364', code:'CFH-T19GM04' },
  { ean:'048561', code:'CFH-T390V1G' },
  { ean:'048592', code:'CFH-T390V1W' },
  { ean:'048509', code:'CFH-T390V2G' },
  { ean:'048288', code:'CFH-T390V2W' },
  { ean:'012371', code:'CFH-T39GM05' },
  { ean:'043115', code:'CFH-T39GM05G' },
  { ean:'048493', code:'CFH-T450V2G' },
  { ean:'048523', code:'CFH-T450V2W' },
  { ean:'025623', code:'CFH-T45GM10' },
  { ean:'049438', code:'FH-CR280V1G' },
  { ean:'049421', code:'FH-CR280V1W' },
  { ean:'049452', code:'FH-CR280V3G' },
  { ean:'049445', code:'FH-CR280V3W' },
  { ean:'044198', code:'FH-CR380G' },
  { ean:'049711', code:'FH-CR380V2G' },
  { ean:'048738', code:'FH-CR380V2W' },
  { ean:'039835', code:'FH-CR380W' }
];

/* ========== Ø£ÙˆØ²Ø§Ù† Ã‰vaporateur (ÙƒØº) ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª ======== */
const EVAP_KG = {
  'T13': 0.77,
  'T19': 0.90,
  'T280': 0.90,
  'T260': 0.90,
  'T380': 1.30,
  'T390': 1.25,
  'T39': 1.25,
  'T450': 1.80
};

/* ========== Ù‚ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (Ù…Ù…) ==========
   ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØªÙŠ Ø£Ø±Ø³Ù„ØªÙ‡Ø§: (Ø®Ø§Ø±Ø¬ÙŠ ØŒ Ø¯Ø§Ø®Ù„ÙŠ)
*/
const DEFAULT_FRAME_MEASUREMENTS = {
  'T13': { outer: 565, inner: 465 },
  'T19': { outer: 729, inner: 605 },
  'T39': { outer: 1115, inner: 960 },
  'T450': { outer: 1425, inner: 1270 }
};

/* ========== Ù…ÙØ§ØªÙŠØ­ localStorage Ù„ÙƒÙ„ Ø¬Ø¯ÙˆÙ„ ========== */
const LS = {
  issues: 'qa_issues_cf_fh_v1',
  foam: 'qa_foam_cf_fh_v1',
  dp: 'qa_dp_cf_fh_v1',
  tanks: 'qa_tanks_cf_fh_v1',
  moussage: 'qa_moussage_cf_fh_v1',
  struct: 'qa_struct_cf_fh_v1',
  frames: 'qa_frames_cf_fh_v1'
};

/* ---------- Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© ---------- */
function formatKg(v){ if(v===null||v===undefined||isNaN(v)) return ''; return Number(v).toFixed(2) + ' ÙƒØº'; }

function findModelByEAN(ean){ return MODELS.find(x => x.ean === ean) || null; }
function findModelByCode(code){ return MODELS.find(x => x.code === code) || null; }

/* computeEvapFromString: ÙŠØ­Ø§ÙˆÙ„ Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Txxx Ø¯Ø§Ø®Ù„ Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ Ø£Ùˆ Ø£Ø±Ù‚Ø§Ù… Ù…Ø«Ù„ 280 ÙÙŠ FH-CR280V1G */
function computeEvapFromString(s){
  if(!s) return null;
  const up = String(s).toUpperCase();
  const keys = Object.keys(EVAP_KG).sort((a,b)=>b.length - a.length);
  for(const k of keys){
    if(up.includes(k.toUpperCase())) return EVAP_KG[k];
    const num = k.replace(/^T/i,'');
    const re = new RegExp('(^|[^0-9])' + num + '([^0-9]|$)','i');
    if(re.test(up)) return EVAP_KG[k];
  }
  return null;
}

/* ---------- ØªØ¹Ø¨Ø¦Ø© Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª ---------- */
function fillModelSelects(){
  const list = document.getElementById('modelList');
  list.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ù…ÙˆØ¯ÙŠÙ„ --</option>';
  MODELS.forEach(m=>{
    const opt = document.createElement('option');
    opt.value = m.code + '||' + m.ean;
    opt.textContent = `${m.code} â€” ${m.ean}`;
    list.appendChild(opt);
  });
  const ids = ['issueModel','foamModel','dpModel','mModel','sModel'];
  ids.forEach(id=>{
    const sel = document.getElementById(id);
    if(!sel) return;
    sel.innerHTML = '';
    MODELS.forEach(m=>{
      const opt = document.createElement('option');
      opt.value = m.code;
      opt.textContent = m.code;
      sel.appendChild(opt);
    });
  });
}
fillModelSelects();

/* ---------- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ---------- */
document.querySelectorAll('#mainMenu button').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    document.querySelectorAll('#mainMenu button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const t = btn.dataset.target;
    document.querySelectorAll('section.card').forEach(s=>s.style.display='none');
    document.getElementById(t).style.display = 'block';
  });
});

/* ===================== Ø§Ù„Ø¨Ø­Ø« ===================== */
function handleLookup(){
  const q = document.getElementById('searchInput').value.trim();
  const out = document.getElementById('searchOutput');
  out.innerHTML = '';
  if(!q){ out.innerHTML = '<div class="small">Ø§ÙƒØªØ¨ EAN6 Ø£Ùˆ Code Ø£Ùˆ FH/CFH</div>'; return; }
  const up = q.toUpperCase();
  if(up === 'FH' || up === 'CFH'){
    if(up === 'FH'){
      out.innerHTML = `<pre>FH-CR280/380 V1:
 Thermostat mÃ©canique
 Compresseur Vitesse constante

FH-CR280/380 V2:
 Thermostat mÃ©canique
 Compresseur inverter

FH-CR280/380 V3:
 Thermostat Ã©lectronique
 Compresseur Vitesse constante</pre>`;
    } else {
      out.innerHTML = `<pre>CFH-390/450/130/260 V1:
 Thermostat mÃ©canique
 Compresseur Vitesse constante

CFH-390/450/130/260 V2:
 Thermostat Ã©lectronique
 Compresseur Vitesse constante

CFH-390/450/130/260 V3:
 Thermostat Ã©lectronique
 Compresseur inverter

CFH-390/450/130/260 V4:
 Thermostat mÃ©canique
 Compresseur inverter</pre>`;
    }
    return;
  }
  let found = findModelByEAN(q);
  if(!found) found = findModelByCode(q);
  if(found){
    const evap = computeEvapFromString(found.code);
    out.innerHTML = `<div><strong>Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„:</strong> ${found.code} â€” <small class="small">EAN ${found.ean}</small></div>
                     <div style="margin-top:8px"><strong>Evaporateur:</strong> ${evap !== null ? formatKg(evap) : '<span class="small muted">ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ</span>'}</div>`;
    const sel = document.getElementById('modelList');
    for(let i=0;i<sel.options.length;i++){
      if(sel.options[i].value.startsWith(found.code + '||')){ sel.selectedIndex = i; break; }
    }
    document.getElementById('modelEvap').textContent = evap !== null ? `Evap: ${formatKg(evap)}` : '';
  } else {
    out.innerHTML = '<div class="small muted">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø¶Ù…Ù† CFH Ø£Ùˆ FH.</div>';
  }
}
function clearSearch(){ document.getElementById('searchInput').value=''; document.getElementById('searchOutput').innerHTML=''; document.getElementById('modelList').selectedIndex = 0; document.getElementById('modelEvap').textContent=''; }

/* Ø¹Ø±Ø¶ Evap Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ù…ÙˆØ¯ÙŠÙ„ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
document.getElementById('modelList').addEventListener('change', function(){
  const v = this.value;
  if(!v){ document.getElementById('modelEvap').textContent=''; return; }
  const code = v.split('||')[0];
  const evap = computeEvapFromString(code);
  document.getElementById('modelEvap').textContent = evap !== null ? `Evap: ${formatKg(evap)}` : 'Evap: ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
});

/* ========== Generic delete from localStorage helper ========== */
function deleteFromLS(key, idx, reloadFn){
  const arr = JSON.parse(localStorage.getItem(key) || '[]');
  if(idx < 0 || idx >= arr.length) return;
  if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ')) return;
  arr.splice(idx,1);
  localStorage.setItem(key, JSON.stringify(arr));
  if(typeof reloadFn === 'function') reloadFn();
}

/* ========================== ISSUES ========================== */
function loadIssues(){
  const arr = JSON.parse(localStorage.getItem(LS.issues) || '[]');
  const tb = document.querySelector('#issuesTable tbody'); tb.innerHTML='';
  arr.forEach((it,idx)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${it.model}</td><td>${it.date}</td><td>${it.time}</td><td>${it.note||''}</td>
      <td><button class="danger" onclick="deleteFromLS('${LS.issues}', ${idx}, loadIssues)">Ø­Ø°Ù</button></td>`;
    tb.appendChild(tr);
  });
}
function addIssue(){
  const model = document.getElementById('issueModel').value;
  const date = document.getElementById('issueDate').value;
  const time = document.getElementById('issueTime').value;
  const note = document.getElementById('issueNote').value;
  if(!model || !date || !time){ alert('Ø§Ù…Ù„Ø£ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª'); return; }
  const arr = JSON.parse(localStorage.getItem(LS.issues) || '[]');
  arr.push({model,date,time,note});
  localStorage.setItem(LS.issues, JSON.stringify(arr));
  document.getElementById('issueNote').value='';
  loadIssues();
}
loadIssues();

/* ========================== FOAM ========================== */
function initFoam(){
  const model = document.getElementById('foamModel').value;
  const date = document.getElementById('foamDate').value;
  const time = document.getElementById('foamTime').value;
  if(!model || !date || !time){ alert('Ø§Ù…Ù„Ø£ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©'); return; }
  document.getElementById('foamArea').style.display = 'block';
  const bodyArea = document.getElementById('bodyArea'); bodyArea.innerHTML='';
  const doorArea = document.getElementById('doorArea'); doorArea.innerHTML='';
  for(let i=1;i<=5;i++){
    const div = document.createElement('div'); div.style.minWidth='150px';
    div.innerHTML = `<div class="small">Ù‚Ø·Ø¹Ø© ${i} - ÙˆØ²Ù† (Øº)</div><input type="number" id="bp${i}" step="0.01"/><div class="small">Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø§Ø¡ (Øº)</div><input type="number" id="bw${i}" step="0.01"/>`;
    bodyArea.appendChild(div);
  }
  for(let i=1;i<=3;i++){
    const div = document.createElement('div'); div.style.minWidth='150px';
    div.innerHTML = `<div class="small">Ø¨Ø§Ø¨ ${i} - ÙˆØ²Ù† (Øº)</div><input type="number" id="dp${i}" step="0.01"/><div class="small">Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø§Ø¡ (Øº)</div><input type="number" id="dw${i}" step="0.01"/>`;
    doorArea.appendChild(div);
  }
  for(let i=1;i<=5;i++){ document.getElementById('bp'+i).addEventListener('input', computeFoam); document.getElementById('bw'+i).addEventListener('input', computeFoam); }
  for(let i=1;i<=3;i++){ document.getElementById('dp'+i).addEventListener('input', computeFoam); document.getElementById('dw'+i).addEventListener('input', computeFoam); }
  const area = document.getElementById('foamArea');
  area.dataset.model = model; area.dataset.date = date; area.dataset.time = time;
  computeFoam();
}
function computeFoam(){
  const bodyVals=[]; for(let i=1;i<=5;i++){ const pw=+ (document.getElementById('bp'+i).value||0); const wt=+ (document.getElementById('bw'+i).value||0); if(pw>0 && wt>0) bodyVals.push((pw/wt)*1000); }
  const doorVals=[]; for(let i=1;i<=3;i++){ const pw=+ (document.getElementById('dp'+i).value||0); const wt=+ (document.getElementById('dw'+i).value||0); if(pw>0 && wt>0) doorVals.push((pw/wt)*1000); }
  const bavg = bodyVals.length ? (bodyVals.reduce((a,b)=>a+b,0)/bodyVals.length) : 0;
  const davg = doorVals.length ? (doorVals.reduce((a,b)=>a+b,0)/doorVals.length) : 0;
  document.getElementById('bodyAvg').value = bavg ? bavg.toFixed(2) : '';
  document.getElementById('doorAvg').value = davg ? davg.toFixed(2) : '';
}
function saveFoamRecord(){
  const area = document.getElementById('foamArea');
  const model = area.dataset.model;
  const date = area.dataset.date;
  const time = area.dataset.time;
  const body = document.getElementById('bodyAvg').value || '';
  const door = document.getElementById('doorAvg').value || '';
  const arr = JSON.parse(localStorage.getItem(LS.foam) || '[]');
  arr.push({model,date,time,body,door});
  localStorage.setItem(LS.foam, JSON.stringify(arr));
  document.getElementById('foamArea').style.display='none';
  loadFoamTable();
}
function loadFoamTable(){ const arr = JSON.parse(localStorage.getItem(LS.foam) || '[]'); const tb=document.querySelector('#foamTable tbody'); tb.innerHTML=''; arr.forEach((it,idx)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${it.model}</td><td>${it.date}</td><td>${it.time}</td><td>${it.body}</td><td>${it.door}</td><td><button class="danger" onclick="deleteFromLS('${LS.foam}', ${idx}, loadFoamTable)">Ø­Ø°Ù</button></td>`; tb.appendChild(tr); }); }
loadFoamTable();

/* ========================== DAMAGED PRODUCTS ========================== */
function addDP(){ const model=document.getElementById('dpModel').value; const date=document.getElementById('dpDate').value; const count=+document.getElementById('dpCount').value||0; const type=document.getElementById('dpType').value; if(!model||!date||!count){ alert('Ø§Ù…Ù„Ø£ Ø§Ù„Ø­Ù‚ÙˆÙ„'); return;} const arr=JSON.parse(localStorage.getItem(LS.dp)||'[]'); arr.push({model,date,count,type}); localStorage.setItem(LS.dp, JSON.stringify(arr)); loadDP(); }
function loadDP(){ const arr=JSON.parse(localStorage.getItem(LS.dp)||'[]'); const tb=document.querySelector('#dpTable tbody'); tb.innerHTML=''; arr.forEach((it,idx)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${it.model}</td><td>${it.date}</td><td>${it.count}</td><td>${it.type||''}</td><td><button class="danger" onclick="deleteFromLS('${LS.dp}', ${idx}, loadDP)">Ø­Ø°Ù</button></td>`; tb.appendChild(tr); }); }
loadDP();

/* ========================== TANKS ========================== */
function addTankRecord(){
  const type = document.getElementById('tankType').value;
  const date = document.getElementById('tankDate').value;
  const count = +document.getElementById('tankCount').value||0;
  const usage = document.getElementById('tankUsage').value;
  const capillaire = +document.getElementById('capillaire').value||0;
  const plomb = +document.getElementById('plomb').value||0;
  const blackboard = +document.getElementById('blackboard').value||0;
  const sideGrand = +document.getElementById('sideGrand').value||0;
  const sidePetit = +document.getElementById('sidePetit').value||0;
  const bottom = +document.getElementById('bottomBoard').value||0;
  if(!type||!date||!count){ alert('Ø§Ù…Ù„Ø£ Ø§Ù„Ø­Ù‚ÙˆÙ„'); return; }
  let evap = null;
  if(usage === 'auto'){
    const w = computeEvapFromString(type);
    if(w !== null) evap = +(w * count);
  }
  const arr = JSON.parse(localStorage.getItem(LS.tanks) || '[]');
  arr.push({type,date,count,usage,capillaire,plomb,blackboard,sideGrand,sidePetit,bottom,evap});
  localStorage.setItem(LS.tanks, JSON.stringify(arr));
  document.getElementById('tankCount').value='1'; document.getElementById('capillaire').value='0'; document.getElementById('plomb').value='0'; document.getElementById('blackboard').value='0';
  document.getElementById('sideGrand').value='0'; document.getElementById('sidePetit').value='0'; document.getElementById('bottomBoard').value='0';
  loadTanks();
}
function loadTanks(){
  const arr = JSON.parse(localStorage.getItem(LS.tanks) || '[]');
  const tb = document.querySelector('#tanksTable tbody'); tb.innerHTML='';
  let total = 0;
  arr.forEach((it,idx)=>{
    const evapText = (it.evap !== null && it.evap !== undefined) ? formatKg(it.evap) : '';
    if(it.evap) total += it.evap;
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${it.type}</td><td>${it.date}</td><td>${it.count}</td><td>${it.usage}</td>
      <td>${it.capillaire}</td><td>${it.plomb}</td><td>${it.blackboard}</td>
      <td>${it.sideGrand}</td><td>${it.sidePetit}</td><td>${it.bottom}</td>
      <td>${evapText}</td>
      <td><button class="danger" onclick="deleteFromLS('${LS.tanks}', ${idx}, loadTanks)">Ø­Ø°Ù</button></td>`;
    tb.appendChild(tr);
  });
  document.getElementById('evapTotal').textContent = total.toFixed(2) + ' ÙƒØº';
}
loadTanks();

/* ========================== MOUSSAGE ========================== */
function addMoussage(){ const model=document.getElementById('mModel').value; const type=document.getElementById('mType').value; const reason=document.getElementById('mReason').value; const date=document.getElementById('mDate').value; const count=+document.getElementById('mCount').value||0; if(!model||!date||!count){ alert('Ø§Ù…Ù„Ø£ Ø§Ù„Ø­Ù‚ÙˆÙ„'); return;} const arr=JSON.parse(localStorage.getItem(LS.moussage)||'[]'); arr.push({model,type,reason,date,count}); localStorage.setItem(LS.moussage, JSON.stringify(arr)); loadMoussage(); }
function loadMoussage(){ const arr=JSON.parse(localStorage.getItem(LS.moussage)||'[]'); const tb=document.querySelector('#mTable tbody'); tb.innerHTML=''; arr.forEach((it,idx)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${it.model}</td><td>${it.type}</td><td>${it.reason}</td><td>${it.date}</td><td>${it.count}</td><td><button class="danger" onclick="deleteFromLS('${LS.moussage}', ${idx}, loadMoussage)">Ø­Ø°Ù</button></td>`; tb.appendChild(tr); }); }
loadMoussage();

/* ========================== STRUCTURE ========================== */
function addStructure(){ const side=document.getElementById('sSide').value; const model=document.getElementById('sModel').value; const reason=document.getElementById('sReason').value; const count=+document.getElementById('sCount').value||0; const date=new Date().toISOString().slice(0,10); if(!model||!count){ alert('Ø§Ù…Ù„Ø£ Ø§Ù„Ø­Ù‚ÙˆÙ„'); return;} const arr=JSON.parse(localStorage.getItem(LS.struct)||'[]'); arr.push({side,model,reason,count,date}); localStorage.setItem(LS.struct, JSON.stringify(arr)); loadStructure(); }
function loadStructure(){ const arr=JSON.parse(localStorage.getItem(LS.struct)||'[]'); const tb=document.querySelector('#sTable tbody'); tb.innerHTML=''; arr.forEach((it,idx)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${it.side}</td><td>${it.model}</td><td>${it.reason}</td><td>${it.count}</td><td>${it.date}</td><td><button class="danger" onclick="deleteFromLS('${LS.struct}', ${idx}, loadStructure)">Ø­Ø°Ù</button></td>`; tb.appendChild(tr); }); }
loadStructure();

/* ========================== FRAMES (Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠ) ========================== */

/* Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù†ÙˆØ¹ØŒ Ø¹ÙŠÙ‘Ù† Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù…Ù† DEFAULT_FRAME_MEASUREMENTS */
const frameTypeEl = document.getElementById('frameType');
const frameOuterEl = document.getElementById('frameOuter');
const frameInnerEl = document.getElementById('frameInner');

function applyDefaultFrameMeasurements(){
  const type = frameTypeEl.value;
  const def = DEFAULT_FRAME_MEASUREMENTS[type];
  if(def){
    frameOuterEl.value = def.outer;
    frameInnerEl.value = def.inner;
  } else {
    frameOuterEl.value = '';
    frameInnerEl.value = '';
  }
}
frameTypeEl.addEventListener('change', applyDefaultFrameMeasurements);
applyDefaultFrameMeasurements();

/* Ø­ÙØ¸ Ù‚ÙŠØ§Ø³ Ø§Ù„Ø¥Ø·Ø§Ø± ÙÙŠ localStorage ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù…Ø¹ Ø§Ù„ÙˆØ­Ø¯Ø§Øª (Ù…Ù…) */
function saveFrame(){
  const type = frameTypeEl.value;
  const outer = (document.getElementById('frameOuter').value || '').toString().trim();
  const inner = (document.getElementById('frameInner').value || '').toString().trim();
  if(!outer || !inner){ alert('Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠØ§Ø³ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ ÙˆØ§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø¨Ø§Ù„Ù…Ù„Ù…'); return; }
  const arr = JSON.parse(localStorage.getItem(LS.frames) || '[]');
  arr.push({type,outer: Number(outer),inner: Number(inner)});
  localStorage.setItem(LS.frames, JSON.stringify(arr));
  loadFrames();
}

/* ØªØ­Ù…ÙŠÙ„ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ù…Ø¹ Ø¥Ø¸Ù‡Ø§Ø± "Ù…Ù…" ÙÙŠ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ */
function loadFrames(){
  const arr = JSON.parse(localStorage.getItem(LS.frames) || '[]');
  const tb = document.querySelector('#frameTable tbody'); tb.innerHTML='';
  arr.forEach((it,idx)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${it.type}</td><td>${it.outer} Ù…Ù…</td><td>${it.inner} Ù…Ù…</td><td><button class="danger" onclick="deleteFromLS('${LS.frames}', ${idx}, loadFrames)">Ø­Ø°Ù</button></td>`;
    tb.appendChild(tr);
  });
}
loadFrames();

/* ---------- ØªÙ‡ÙŠØ¦Ø© ØªÙˆØ§Ø±ÙŠØ® Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ---------- */
document.querySelectorAll('input[type="date"]').forEach(i=>{ if(!i.value) i.value = new Date().toISOString().slice(0,10); });

/* ========== INIT ========== */
(function init(){
  fillModelSelects();
  loadIssues(); loadFoamTable(); loadDP(); loadTanks(); loadMoussage(); loadStructure(); loadFrames();
})();
</script>
</body>
</html>