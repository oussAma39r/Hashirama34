<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ­ Ù†Ø¸Ø§Ù… ÙƒÙˆÙ†Ø¯ÙˆØ± Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ - Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„Ø¨Ø­Ø«</title>
<style>
  :root{
    --bg:#2f3640;
    --section-bg:#353b48;
    --table-bg:#2d3436;
    --border:#636e72;
    --text:#ecf0f1;
    --accent:#00cec9;
    --dark-card: #151617;
    --dark-accent-text: #aeeeff;
    --warning: #ffb3b3;
    --success: #bfffcf;
    --primary-btn: #4a4ad0;
    --alt-btn: #009879;
    --search-highlight: #00c8ff;
  }
  *{box-sizing:border-box;font-family:'Arial',sans-serif;}
  body{margin:0;background:var(--bg);color:var(--text);line-height:1.6;}
  
  /* Sidebar */
  .sidebar{
    height:100%;width:0;position:fixed;z-index:10;top:0;right:0;
    background:#111;overflow-x:hidden;transition:0.3s;padding-top:60px;
  }
  .sidebar a{
    display:block;padding:10px 30px;font-size:18px;color:#f1f1f1;text-decoration:none;
  }
  .sidebar a:hover{background:#575757;}
  .sidebar .closebtn{position:absolute;top:0;right:25px;font-size:36px;}
  .openbtn{
    font-size:30px;cursor:pointer;color:#fff;position:fixed;top:15px;right:15px;z-index:4;
  }

  /* Sections */
  .sectionPage{display:none;padding:80px 20px;}
  .section{background:var(--section-bg);padding:20px;border-radius:8px;margin-bottom:20px;}
  .card{background:var(--dark-card);border-radius:10px;padding:14px;margin:14px 0;box-shadow:0 6px 18px rgba(0,0,0,0.6);}

  /* Inputs & Buttons */
  input,select,textarea,button{
    padding:8px;margin:5px;border-radius:4px;border:1px solid var(--border);
    background:var(--table-bg);color:var(--text);
  }
  input[type=number],input[type=text]{min-width:140px;text-align:center;}
  button{cursor:pointer;background:var(--primary-btn);color:#fff;font-weight:bold;border:none;}
  button:not(.closebtn):not(.openbtn){background:var(--accent);color:#000;font-weight:bold;}
  button.alt{background:var(--alt-btn);color:#fff;}

  /* Table */
  table{width:100%;border-collapse:collapse;background:var(--table-bg);font-size:14px;}
  th,td{border:1px solid #555;padding:8px;text-align:center;color:#fff;}
  th{background:var(--border);color:var(--dark-accent-text);}
  
  /* Search Results Styling */
  .search-result-item {
    background: #2b2b2b; padding: 10px; margin-top: 10px; border-radius: 5px; border-right: 4px solid var(--search-highlight);
    text-align: right;
  }
  .error { color: #ff6b6b; margin-top: 10px; }

  .image-preview{max-width:150px;max-height:120px;object-fit:contain;display:block;margin:auto;border:1px solid #ccc;border-radius:4px;}
  canvas{max-width:100%;margin-top:20px;}
</style>
</head>
<body>

<span class="openbtn" onclick="toggleSidebar()">â˜°</span>

<div class="sidebar" id="mySidebar">
  <a class="closebtn" href="javascript:void(0)" onclick="toggleSidebar()">Ã—</a>
  <a href="#" onclick="showSection('searchSection')">ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…ÙˆØ¯ÙŠÙ„ (EAN6)</a>
  <hr style="border-color:#333;">
  <a href="#" onclick="showSection('entrySection')">ğŸ“ Ø§Ø¯Ø®Ø§Ù„ Ù…Ø´ÙƒÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©</a>
  <a href="#" onclick="showSection('rejectedSection')">ğŸ—‘ï¸ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¬Ù…Ø¯Ø© Ø§Ù„ØªØ§Ù„ÙØ©</a>
  <a href="#" onclick="showSection('dateSection')">ğŸ“‹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®</a>
  <a href="#" onclick="showSection('summarySection');scrollToAnchor('dailyReportTitle')">ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø¶Ø±Ø§Ø±</a>
  <hr style="border-color:#333;">
  <a href="#" onclick="showSection('mouldDataSection')">ğŸ“ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨</a>
  <a href="#" onclick="showSection('componentDataSection')">ğŸ§ª ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª</a>
  <a href="#" onclick="showSection('densitySection')">ğŸŒŠ Ø­Ø³Ø§Ø¨ Ø§Ù„ÙƒØ«Ø§ÙØ©</a>
</div>

<div id="heroSection" style="background-image: url('https://cdn.pixabay.com/photo/2013/07/12/18/20/freezer-153810_960_720.png'); background-size: cover; background-position: center; height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; color: white; text-shadow: 1px 1px 5px black;">
  <div style="max-width: 90%; text-align: center; background-color: rgba(0,0,0,0.6); padding: 30px; border-radius: 15px;">
    <h1 style="font-size: 36px; margin-bottom: 10px;">Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ÙØ±ÙŠØ²Ø±Ø§Øª Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</h1>
    <p>Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ØŒ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹ÙŠÙˆØ¨ØŒ ÙˆØ­Ø³Ø§Ø¨ ÙƒØ«Ø§ÙØ© Ø§Ù„Ø±ØºÙˆØ© ÙÙŠ Ù…Ù†ØµØ© ÙˆØ§Ø­Ø¯Ø©.</p>
    <button onclick="openMainMenu()" style="margin-top: 20px; padding: 12px 25px; background: #00cec9; color: #000; font-size: 18px; border-radius: 6px;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„</button>
  </div>
</div>

<div id="mainMenu" style="display:none; min-height: 100vh; background: #2f3640; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 15px; padding: 20px;">
  <button onclick="navigateTo('searchSection')" style="width:250px; background:var(--search-highlight);">ğŸ” Ø¨Ø­Ø« EAN6 / Ù…ÙˆØ¯ÙŠÙ„</button>
  <button onclick="navigateTo('entrySection')" style="width:250px;">ğŸ“ Ù…Ø´ÙƒÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
  <button onclick="navigateTo('rejectedSection')" style="width:250px;">ğŸ—‘ï¸ Ø§Ù„Ù…Ø¬Ù…Ø¯Ø© Ø§Ù„ØªØ§Ù„ÙØ©</button>
  <button onclick="navigateTo('densitySection')" style="width:250px; background: var(--primary-btn); color:white;">ğŸŒŠ Ø­Ø³Ø§Ø¨ Ø§Ù„ÙƒØ«Ø§ÙØ©</button>
  <button onclick="navigateTo('summarySection')" style="width:250px;">ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø¶Ø±Ø§Ø±</button>
</div>

<div class="sectionPage" id="searchSection">
  <div class="section">
    <h2 style="color:var(--search-highlight)">ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±ÙŠØ²Ø±</h2>
    <p>Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ <b>EAN6</b> Ø£Ùˆ Ø§Ø³Ù… <b>Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</b> (Ù…Ø«Ø§Ù„: 048738 Ø£Ùˆ CRF)</p>
    <input type="text" id="searchInput" placeholder="Ø¨Ø­Ø«..." style="width: 100%; height: 50px; font-size: 20px;">
    <button onclick="performSearch()" style="width: 100%; padding: 15px; margin-top: 10px;">Ø¨Ø­Ø« Ø§Ù„Ø¢Ù†</button>
    <div id="searchResults" style="margin-top: 20px;"></div>
  </div>
</div>

<div class="sectionPage" id="entrySection">
<div class="section">
<h2>ğŸ“ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø´ÙƒÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
<label>Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠØ²Ø±:</label>
<select id="freezerName">
  <option value="RFDK510G">RFDK510G</option><option value="CFH140A">CFH140A</option><option value="CFH-MT26">CFH-MT26</option><option value="CFH-MT260V4G">CFH-MT260V4G</option><option value="CFH-MT260V4W">CFH-MT260V4W</option><option value="CFH-MT26G">CFH-MT26G</option><option value="CFH-T130V2G">CFH-T130V2G</option><option value="CFH-T130V2W">CFH-T130V2W</option><option value="CFH-T13GM03">CFH-T13GM03</option><option value="CFH-T19GM04">CFH-T19GM04</option><option value="CFH-T390V1G">CFH-T390V1G</option><option value="CFH-T390V1W">CFH-T390V1W</option><option value="CFH-T390V2G">CFH-T390V2G</option><option value="CFH-T390V2W">CFH-T390V2W</option><option value="CFH-T39GM05">CFH-T39GM05</option><option value="CFH-T39GM05G">CFH-T39GM05G</option><option value="CFH-T450V2G">CFH-T450V2G</option><option value="CFH-T450V2W">CFH-T450V2W</option><option value="CFH-T45GM10">CFH-T45GM10</option><option value="CRD45V4G">CRD45V4G</option><option value="CRD45V4N">CRD45V4N</option><option value="CRD45V4W">CRD45V4W</option><option value="CRD45V4X">CRD45V4X</option><option value="CRD58V4G">CRD58V4G</option><option value="CRD58V4W">CRD58V4W</option><option value="CRD58V4X">CRD58V4X</option><option value="CRD65V4G">CRD65V4G</option><option value="CRD65V4W">CRD65V4W</option><option value="CRD65V4X">CRD65V4X</option><option value="CRF-T12GM7">CRF-T12GM7</option><option value="CRF-T12GM7N">CRF-T12GM7N</option><option value="CRF-T36GH07">CRF-T36GH07</option><option value="CRF-T36GH07-G">CRF-T36GH07-G</option><option value="FH-CR280V1G">FH-CR280V1G</option><option value="FH-CR280V1W">FH-CR280V1W</option><option value="FH-CR280V3G">FH-CR280V3G</option><option value="FH-CR280V3W">FH-CR280V3W</option><option value="FH-CR380G">FH-CR380G</option><option value="FH-CR380V2G">FH-CR380V2G</option><option value="FH-CR380V2W">FH-CR380V2W</option><option value="FH-CR380W">FH-CR380W</option><option value="KFV240W">KFV240W</option>
</select>
<br/>
<label>Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:</label>
<select id="problem">
  <option value="Ø®Ø¯ÙˆØ´ Ø£Ùˆ Ø§Ù†Ø¨Ø¹Ø§Ø¬Ø§Øª Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‚Ù„">Ø®Ø¯ÙˆØ´ Ø£Ùˆ Ø§Ù†Ø¨Ø¹Ø§Ø¬Ø§Øª Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‚Ù„</option>
  <option value="Ø¥Ù…Ø§Ù„Ø© Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‚Ù„">Ø¥Ù…Ø§Ù„Ø© Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‚Ù„</option>
  <option value="ØªÙˆØ²ÙŠØ¹ ØºÙŠØ± Ù…ØªØ³Ø§Ùˆ Ù„Ù„Ø±ØºÙˆØ©">ØªÙˆØ²ÙŠØ¹ ØºÙŠØ± Ù…ØªØ³Ø§Ùˆ Ù„Ù„Ø±ØºÙˆØ©</option>
  <option value="ÙØ±Ø§ØºØ§Øª Ø£Ùˆ ØªØ¬Ø§ÙˆÙŠÙ ÙÙŠ Ø§Ù„Ø±ØºÙˆØ©">ÙØ±Ø§ØºØ§Øª Ø£Ùˆ ØªØ¬Ø§ÙˆÙŠÙ ÙÙŠ Ø§Ù„Ø±ØºÙˆØ©</option>
  <option value="ØªØ´ÙˆÙ‡Ø§Øª ÙÙŠ Ø§Ù„Ù‡ÙŠÙƒÙ„">ØªØ´ÙˆÙ‡Ø§Øª ÙÙŠ Ø§Ù„Ù‡ÙŠÙƒÙ„</option>
  <option value="Ø±ØºÙˆØ© Ø²Ø§Ø¦Ø¯Ø© Ø£Ùˆ ØªØ³Ø±Ø¨">Ø±ØºÙˆØ© Ø²Ø§Ø¦Ø¯Ø© Ø£Ùˆ ØªØ³Ø±Ø¨</option>
  <option value="Ø±Ø§Ø¦Ø­Ø© ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ© Ù‚ÙˆÙŠØ©">Ø±Ø§Ø¦Ø­Ø© ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ© Ù‚ÙˆÙŠØ©</option>
  <option value="ØªÙƒØ«Ù Ø¯Ø§Ø®Ù„ÙŠ Ø£Ùˆ ØªØ£ÙƒÙ„">ØªÙƒØ«Ù Ø¯Ø§Ø®Ù„ÙŠ Ø£Ùˆ ØªØ£ÙƒÙ„</option>
  <option value="Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ">Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</option>
  <option value="Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ">Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</option>
  <option value="Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠ">Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠ</option>
  <option value="Ù…Ø´Ø§ÙƒÙ„ Ø§Ø®Ø±Ù‰">Ù…Ø´Ø§ÙƒÙ„ Ø§Ø®Ø±Ù‰</option>
</select>
<label>Ø±Ù‚Ù… Ø§Ù„Ù‚Ø§Ù„Ø¨:</label>
<select id="moldNumber"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>Ù„Ø§ ÙŠØªØ¹Ù„Ù‚ Ø¨Ø§Ù„Ù‚Ø§Ù„Ø¨</option></select>
<br/>
<label>ÙˆØµÙ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:</label>
<textarea id="description" rows="2" style="width:100%"></textarea>
<br/>
<label>ØµÙˆØ±Ø©:</label>
<input accept="image/*" capture="environment" id="imageInput" onchange="previewImage()" type="file"/>
<div id="imagePreviewContainer" style="display:none;"></div>
<br/>
<label>Ø§Ù„ØªØ§Ø±ÙŠØ®:</label><input id="date" type="date"/>
<label>Ø§Ù„ÙˆÙ‚Øª:</label><input id="time" type="time"/>
<label>Ø§Ù„ÙØªØ±Ø©:</label>
<select id="period"><option value="ØµØ¨Ø§Ø­ÙŠØ©">ØµØ¨Ø§Ø­ÙŠØ©</option><option value="Ù…Ø³Ø§Ø¦ÙŠØ©">Ù…Ø³Ø§Ø¦ÙŠØ©</option></select>
<br/>
<button onclick="addRow()" style="background:var(--alt-btn); color:#fff; width:100%; padding:15px;">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ø¬Ù„</button>
</div>
</div>

<div class="sectionPage" id="rejectedSection">
<div class="section">
<h2>ğŸ—‘ï¸ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¬Ù…Ø¯Ø© Ø§Ù„ØªØ§Ù„ÙØ© (Produit RebutÃ©)</h2>
<label>Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠØ²Ø±:</label>
<select id="rejectedFreezerName">
  <option value="RFDK510G">RFDK510G</option><option value="CFH140A">CFH140A</option><option value="CFH-MT26">CFH-MT26</option><option value="CFH-MT260V4G">CFH-MT260V4G</option><option value="CFH-MT260V4W">CFH-MT260V4W</option><option value="CFH-MT26G">CFH-MT26G</option><option value="CFH-T130V2G">CFH-T130V2G</option><option value="CFH-T130V2W">CFH-T130V2W</option><option value="CFH-T13GM03">CFH-T13GM03</option><option value="CFH-T19GM04">CFH-T19GM04</option><option value="CFH-T390V1G">CFH-T390V1G</option><option value="CFH-T390V1W">CFH-T390V1W</option><option value="CFH-T390V2G">CFH-T390V2G</option><option value="CFH-T390V2W">CFH-T390V2W</option><option value="CFH-T39GM05">CFH-T39GM05</option><option value="CFH-T39GM05G">CFH-T39GM05G</option><option value="CFH-T450V2G">CFH-T450V2G</option><option value="CFH-T450V2W">CFH-T450V2W</option><option value="CFH-T45GM10">CFH-T45GM10</option><option value="CRD45V4G">CRD45V4G</option><option value="CRD45V4N">CRD45V4N</option><option value="CRD45V4W">CRD45V4W</option><option value="CRD45V4X">CRD45V4X</option><option value="CRD58V4G">CRD58V4G</option><option value="CRD58V4W">CRD58V4W</option><option value="CRD58V4X">CRD58V4X</option><option value="CRD65V4G">CRD65V4G</option><option value="CRD65V4W">CRD65V4W</option><option value="CRD65V4X">CRD65V4X</option><option value="CRF-T12GM7">CRF-T12GM7</option><option value="CRF-T12GM7N">CRF-T12GM7N</option><option value="CRF-T36GH07">CRF-T36GH07</option><option value="CRF-T36GH07-G">CRF-T36GH07-G</option><option value="FH-CR280V1G">FH-CR280V1G</option><option value="FH-CR280V1W">FH-CR280V1W</option><option value="FH-CR280V3G">FH-CR280V3G</option><option value="FH-CR280V3W">FH-CR280V3W</option><option value="FH-CR380G">FH-CR380G</option><option value="FH-CR380V2G">FH-CR380V2G</option><option value="FH-CR380V2W">FH-CR380V2W</option><option value="FH-CR380W">FH-CR380W</option><option value="KFV240W">KFV240W</option>
</select>
<br/>
<label>Ù†ÙˆØ¹ Ø§Ù„ØªÙ„Ù:</label>
<textarea id="rejectedDescription" rows="2" style="width:100%"></textarea>
<br/>
<label>ØµÙˆØ±Ø© Ø§Ù„ØªÙ„Ù:</label>
<input accept="image/*" capture="environment" id="rejectedImageInput" onchange="previewRejectedImage()" type="file"/>
<div id="rejectedImagePreviewContainer" style="display:none;"></div>
<br/>
<button onclick="addRejectedRow()" style="background:var(--alt-btn); color:#fff; width:100%;">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ø¬Ù„</button>
</div>

<div class="section">
  <h2>Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¬Ù…Ø¯Ø© Ø§Ù„ØªØ§Ù„ÙØ©</h2>
  <input id="loadRejectedDate" type="date"/>
  <button onclick="loadRejectedData()">Ø¹Ø±Ø¶</button>
  <table id="rejectedTable">
    <thead><tr><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„ÙˆÙ‚Øª</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„ØªÙ„Ù</th><th>Ø§Ù„ØµÙˆØ±Ø©</th></tr></thead>
    <tbody></tbody>
  </table>
</div>
</div>

<div class="sectionPage" id="dateSection">
<div class="section">
<h2>ğŸ“‹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</h2>
<label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø³Ø¬Ù„:</label><input id="loadDate" type="date"/>
<button onclick="loadData()">Ø¹Ø±Ø¶</button>
<button onclick="saveData()" class="alt">Ø­ÙØ¸</button>
<button onclick="exportTable('pdf')">PDF</button>
<table id="logTable">
<thead><tr><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„ÙˆÙ‚Øª</th><th>Ø§Ù„ÙØªØ±Ø©</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</th><th>Ø§Ù„Ù‚Ø§Ù„Ø¨</th><th>ÙˆØµÙ</th><th>Ø§Ù„ØµÙˆØ±Ø©</th></tr></thead>
<tbody></tbody>
</table>
</div>
</div>

<div class="sectionPage" id="summarySection">
<div class="section">
<h2>ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø¶Ø±Ø§Ø±</h2>
<canvas id="damageChart" height="150"></canvas>
<div id="summaryDetails">
<h3 id="dailyReportTitle">Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ</h3>
<table id="dailyProblemTable"><thead><tr><th>Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</th><th>Ø¹Ø¯Ø¯</th></tr></thead><tbody></tbody></table>
</div>
</div>
</div>

<div class="sectionPage" id="mouldDataSection">
  <div class="section card" id="mouleDataCard">
    <h2>ğŸ“ Ù‚ÙŠØ§Ø³Ø§Øª Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ (MOULE Data)</h2>
    <table>
        <thead><tr><th>MOULE</th><th>TOP</th><th>SAY</th></tr></thead>
        <tbody>
            <tr><td>T13</td><td>8.6</td><td>49.5</td></tr>
            <tr><td>T19(280)</td><td>8.6</td><td>49.5</td></tr>
            <tr><td>T26</td><td>9.2</td><td>49.5</td></tr>
            <tr><td>T38</td><td>9.2</td><td>57</td></tr>
            <tr><td>T39</td><td>10.2</td><td>64</td></tr>
            <tr><td>T45</td><td>10.2</td><td>64</td></tr>
        </tbody>
    </table>
  </div>
</div>

<div class="sectionPage" id="componentDataSection">
  <div class="section card" id="componentDataCard">
      <h2>ğŸ§ª ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª (Component Data)</h2>
      <table dir="ltr" style="font-size: 12px;">
          <thead><tr><th>Article</th><th>DÃ©signation</th><th>QtÃ©</th><th>Total Kg</th></tr></thead>
          <tbody id="compBody">
            <tr><td rowspan="3">Porte T13</td><td>ISOCYANATE</td><td>0,342</td><td rowspan="3">0,579</td></tr>
            <tr><td>POLYOL</td><td>0,213</td></tr>
            <tr><td>CYCLOPENTHANE</td><td>0,024</td></tr>
            </tbody>
      </table>
  </div>
</div>

<div class="sectionPage" id="densitySection">
  <div class="section card">
    <h2>ğŸŒŠ Ø­Ø³Ø§Ø¨ Ø§Ù„ÙƒØ«Ø§ÙØ© (air / water Ã— 1000)</h2>
    <select id="sampleType" onchange="renderPieceInputs()">
      <option value="corps">Ø§Ù„Ù…Ø¬Ù…Ø¯Ø© (Corps) â€” 5 Ù‚Ø·Ø¹</option>
      <option value="portes">Ø§Ù„Ø¨Ø§Ø¨ (Portes) â€” 3 Ù‚Ø·Ø¹</option>
    </select>
    <div id="piecesArea" style="margin-top:12px;"></div>
    <button onclick="calculateByPieces()" style="width:100%; padding:15px; margin-top:10px;">Ø­Ø³Ø§Ø¨ Ø§Ù„ÙƒØ«Ø§ÙØ©</button>
    <div id="calcResult" class="result" style="font-size:20px;"></div>
    <div id="calcWarning" class="warning"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
  // --- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø­Ø« (Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø«Ø§Ù†ÙŠ) ---
  const eanDatabase = [
    { ean: "030719", code: "RFDK510G" }, { ean: "043153", code: "CFH140A" },
    { ean: "039965", code: "CFH-MT26" }, { ean: "048752", code: "CFH-MT260V4G" },
    { ean: "048813", code: "CFH-MT260V4W" }, { ean: "044181", code: "CFH-MT26G" },
    { ean: "048516", code: "CFH-T130V2G" }, { ean: "048271", code: "CFH-T130V2W" },
    { ean: "012357", code: "CFH-T13GM03" }, { ean: "012364", code: "CFH-T19GM04" },
    { ean: "048561", code: "CFH-T390V1G" }, { ean: "048592", code: "CFH-T390V1W" },
    { ean: "048509", code: "CFH-T390V2G" }, { ean: "048288", code: "CFH-T390V2W" },
    { ean: "012371", code: "CFH-T39GM05" }, { ean: "043115", code: "CFH-T39GM05G" },
    { ean: "048493", code: "CFH-T450V2G" }, { ean: "048523", code: "CFH-T450V2W" },
    { ean: "025623", code: "CFH-T45GM10" }, { ean: "035837", code: "CRD45V4G" },
    { ean: "042880", code: "CRD45V4N" }, { ean: "035820", code: "CRD45V4W" },
    { ean: "039330", code: "CRD45V4X" }, { ean: "035851", code: "CRD58V4G" },
    { ean: "035844", code: "CRD58V4W" }, { ean: "039347", code: "CRD58V4X" },
    { ean: "035868", code: "CRD65V4G" }, { ean: "035875", code: "CRD65V4W" },
    { ean: "039354", code: "CRD65V4X" }, { ean: "022462", code: "CRF-T12GM7" },
    { ean: "022806", code: "CRF-T12GM7N" }, { ean: "011930", code: "CRF-T36GH07" },
    { ean: "014580", code: "CRF-T36GH07-G" }, { ean: "049438", code: "FH-CR280V1G" },
    { ean: "049421", code: "FH-CR280V1W" }, { ean: "049452", code: "FH-CR280V3G" },
    { ean: "049445", code: "FH-CR280V3W" }, { ean: "044198", code: "FH-CR380G" },
    { ean: "049711", code: "FH-CR380V2G" }, { ean: "048738", code: "FH-CR380V2W" },
    { ean: "039835", code: "FH-CR380W" }, { ean: "050595", code: "KFV240W" }
  ];

  function performSearch() {
    const term = document.getElementById('searchInput').value.toUpperCase();
    const resDiv = document.getElementById('searchResults');
    resDiv.innerHTML = "";
    const results = eanDatabase.filter(i => i.ean.includes(term) || i.code.includes(term));
    if(results.length === 0) { resDiv.innerHTML = "<div class='error'>âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>"; return; }
    results.forEach(item => {
      resDiv.innerHTML += `<div class="search-result-item"><b>EAN6:</b> ${item.ean} | <b>Ø§Ù„ÙƒÙˆØ¯:</b> ${item.code}</div>`;
    });
  }

  // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙˆØ§Ù„ØªÙ†Ù‚Ù„ ---
  function toggleSidebar(){
    const b = document.getElementById('mySidebar');
    b.style.width = b.style.width === '250px' ? '0' : '250px';
  }
  function showSection(id){
    document.querySelectorAll('.sectionPage').forEach(s=>s.style.display='none');
    document.getElementById(id).style.display='block';
    document.getElementById('mainMenu').style.display='none';
    document.getElementById('heroSection').style.display='none';
    if(id === 'densitySection') renderPieceInputs();
    toggleSidebar();
    showBackButton();
  }
  function openMainMenu() {
    document.getElementById('heroSection').style.display = 'none';
    document.getElementById('mainMenu').style.display = 'flex';
  }
  function navigateTo(id) { showSection(id); toggleSidebar(); }
  
  function showBackButton() {
    if (!document.getElementById('backButton')) {
      const btn = document.createElement('button');
      btn.innerText = 'â¬… Ø±Ø¬ÙˆØ¹'; btn.id = 'backButton';
      btn.style = 'position: fixed; top: 20px; left: 20px; z-index: 15; background:#00cec9; color:#000;';
      btn.onclick = () => {
        document.querySelectorAll('.sectionPage').forEach(s => s.style.display = 'none');
        document.getElementById('mainMenu').style.display = 'flex';
        btn.remove();
      };
      document.body.appendChild(btn);
    }
  }

  // --- ÙˆØ¸Ø§Ø¦Ù Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¬ÙˆØ¯Ø© (Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø£ÙˆÙ„) ---
  function previewImage(){ /* ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©... */ }
  function addRow(){ /* ÙƒÙˆØ¯ Ø¥Ø¶Ø§ÙØ© Ù…Ø´ÙƒÙ„Ø©... */ }
  function calculateByPieces(){ /* ÙƒÙˆØ¯ Ø§Ù„ÙƒØ«Ø§ÙØ©... */ }
  function renderPieceInputs(){
      const type = document.getElementById('sampleType').value;
      const count = type === 'corps' ? 5 : 3;
      const area = document.getElementById('piecesArea');
      let html = `<table><thead><tr><th>Ø§Ù„Ù‚Ø·Ø¹Ø©</th><th>Ù‡ÙˆØ§Ø¡ (g)</th><th>Ù…Ø§Ø¡ (g)</th></tr></thead><tbody>`;
      for(let i=1;i<=count;i++){
        html += `<tr><td>${i}</td><td><input type="number" class="air" data-i="${i}"></td><td><input type="number" class="water" data-i="${i}"></td></tr>`;
      }
      area.innerHTML = html + `</tbody></table>`;
  }
  
  // ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
  window.onload = () => {
    document.getElementById('date').valueAsDate = new Date();
  };
</script>
</body>
</html>
